<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3D Мини-Гонка</title>
<style>body{margin:0;overflow:hidden;background:#87ceeb;}</style>
</head>
<body>
<script src="https://cdn.jsdelivr.net/npm/three@0.157.0/build/three.min.js"></script>
<script>
const scene=new THREE.Scene();
const camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,1000);
const renderer=new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth,window.innerHeight);
document.body.appendChild(renderer.domElement);

// Свет
const light=new THREE.DirectionalLight(0xffffff,1);
light.position.set(5,10,5);
scene.add(light);

// Дорога
const roadGeometry=new THREE.PlaneGeometry(20,200);
const roadMaterial=new THREE.MeshPhongMaterial({color:0x555555});
const road=new THREE.Mesh(roadGeometry,roadMaterial);
road.rotation.x=-Math.PI/2;
scene.add(road);

// Машина
const carGeometry=new THREE.BoxGeometry(2,1,4);
const carMaterial=new THREE.MeshPhongMaterial({color:0xff0000});
const car=new THREE.Mesh(carGeometry,carMaterial);
car.position.y=0.5;
scene.add(car);

// Дома
const houses=[];
for(let i=-90;i<90;i+=20){
  const houseGeometry=new THREE.BoxGeometry(5,8,5);
  const houseMaterial=new THREE.MeshPhongMaterial({color:0x8B4513});
  const houseLeft=new THREE.Mesh(houseGeometry,houseMaterial);
  houseLeft.position.set(-15,4,i);
  scene.add(houseLeft);
  houses.push(houseLeft);

  const houseRight=new THREE.Mesh(houseGeometry,houseMaterial);
  houseRight.position.set(15,4,i+10);
  scene.add(houseRight);
  houses.push(houseRight);
}

// Камера
camera.position.set(0,5,10);
camera.lookAt(car.position);

// Управление
let speed=0;
let rotationSpeed=0;
document.addEventListener('keydown',e=>{
  if(e.key==='ArrowUp') speed=0.2;
  if(e.key==='ArrowDown') speed=-0.2;
  if(e.key==='ArrowLeft') rotationSpeed=0.05;
  if(e.key==='ArrowRight') rotationSpeed=-0.05;
});
document.addEventListener('keyup',e=>{
  if(e.key==='ArrowUp'||e.key==='ArrowDown') speed=0;
  if(e.key==='ArrowLeft'||e.key==='ArrowRight') rotationSpeed=0;
});

// Анимация
function animate(){
  requestAnimationFrame(animate);
  car.rotation.y+=rotationSpeed;
  car.position.x+=Math.sin(car.rotation.y)*speed;
  car.position.z+=Math.cos(car.rotation.y)*speed;

  camera.position.x=car.position.x-Math.sin(car.rotation.y)*10;
  camera.position.z=car.position.z-Math.cos(car.rotation.y)*10;
  camera.position.y=car.position.y+5;
  camera.lookAt(car.position);

  renderer.render(scene,camera);
}
animate();
</script>
</body>
</html>
